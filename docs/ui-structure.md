# Структура интерфейса приложения

## Общая структура

Приложение использует единый интерфейс на базе React, который отображается как в основном окне Electron, так и в браузере для мобильных устройств. Все страницы открываются через встроенный браузер для унификации.

## Главное окно приложения

### Структура главного окна

```
┌─────────────────────────────────────────────────┐
│  vMix Volley Scoreboard                    [×]  │
├─────────────────────────────────────────────────┤
│  [Меню] [Матч] [Настройки] [О программе]       │
├─────────────────────────────────────────────────┤
│                                                 │
│           [Контент текущей страницы]            │
│                                                 │
└─────────────────────────────────────────────────┘
```

## Страницы приложения

### 1. Страница "Добро пожаловать" / "Главная"

**Назначение:** Первая страница при запуске приложения, выбор действия

**Элементы:**

- Кнопка "Создать новый матч"
- Кнопка "Открыть существующий матч"
- Список последних открытых матчей (опционально)
- Информация о текущем статусе подключения к vMix

**Когда отображается:**

- При первом запуске
- Когда нет открытого матча

---

### 2. Страница "Управление матчем" (основная рабочая страница)

**Назначение:** Главная контрольная панель для ведения счета

**Структура:**

```
┌─────────────────────────────────────────────────────┐
│  Информация о матче                                 │
│  [Турнир] | [Место] | [Дата/Время]                  │
├─────────────────────────────────────────────────────┤
│                                                     │
│  Команда А          │          Команда Б           │
│  [Название]         │          [Название]          │
│  [Цвет формы]       │          [Цвет формы]        │
│                                                     │
│  Счет по партиям:                                   │
│  Партия 1:  [25] - [20]                            │
│  Партия 2:  [23] - [25]                            │
│  Партия 3:  [  ] - [  ]                            │
│  Партия 4:  [  ] - [  ]                            │
│  Партия 5:  [  ] - [  ]                            │
│                                                     │
│  Текущая партия:                                    │
│  [Команда А]  [25] : [20]  [Команда Б]             │
│  Подача: [Команда А]  [◄] [►]                       │
│                                                     │
│  [ -1 ] [ -1 ]    [ +1 ] [ +1 ]                    │
│  Команда А         Команда Б                       │
│                                                     │
│  [Сетбол] [Матчбол]                                 │
│                                                     │
│  [Завершить партию]  [Отменить последнее действие] │
│                                                     │
│  Расширенная статистика: [Включить]                │
│  [Атака] [Блок] [Подачи] [Ошибки соперника]        │
│                                                     │
│  Управление плашками vMix:                          │
│  [Заявка ✓] [Статистика] [Состав] [Стартовый состав]│
│  [Текущий счет ✓] [Счет П1] [Счет П2] [Счет П3]    │
│  [Счет П4] [Счет П5] [Судья 1] [Судья 2]            │
│  (✓ = активна в оверлее)                            │
│                                                     │
│  Статус: [Подключено к vMix ✓]                     │
│                                                     │
│  [Сохранить матч]  [Мобильный доступ]              │
└─────────────────────────────────────────────────────┘
```

**Функциональность:**

- Управление счетом текущей партии
- Отображение счета по всем партиям
- Кнопки для изменения счета (+1, -1 для каждой команды)
- Автоматический учет перехода подачи при начислении очка
- Ручная коррекция подачи (кнопки ◄ ►)
- Отображение индикаторов сетбола и матчбола
- Завершение партии
- Отмена последнего действия
- Переключение расширенной статистики
- Кнопки управления статистикой (Атака, Блок, Подачи, Ошибки соперника)
- Кнопки управления плашками vMix (12 различных плашек)
- State-dependent кнопки плашек: отображение текущего состояния (активна/неактивна в оверлее)
- Синхронизация состояния кнопок с реальным состоянием оверлеев в vMix при установленном соединении
- Визуальная индикация активных плашек (например, подсветка или галочка)
- Индикатор подключения к vMix
- Быстрый доступ к сохранению и мобильному доступу

---

### 3. Страница "Настройки матча"

**Назначение:** Настройка параметров текущего матча

**Разделы:**

#### 3.1. Информация о турнире

- Название турнира (текстовое поле)
- Место проведения (текстовое поле)
- Дата проведения (календарь/датапикер)
- Время начала (времяпикер)

#### 3.2. Команды

- **Команда А:**
  - Название команды (текстовое поле)
  - Выбор цвета формы (цветовой пикер)
  - Загрузка логотипа команды
  - Указание тренера команды
  - Загрузка/сохранение состава команды
- **Команда Б:**
  - Название команды (текстовое поле)
  - Выбор цвета формы (цветовой пикер)
  - Загрузка логотипа команды
  - Указание тренера команды
  - Загрузка/сохранение состава команды

#### 3.3. Судейская коллегия

- Главный судья (текстовое поле)
- Судья на линии 1 (текстовое поле)
- Судья на линии 2 (текстовое поле)
- Секретарь (текстовое поле)
- Дополнительные судьи (опционально)

**Кнопки:**

- [Сохранить изменения]
- [Отмена]

---

### 4. Страница "Настройки vMix"

**Назначение:** Конфигурация подключения к vMix

**Элементы:**

```
┌─────────────────────────────────────────────────┐
│  Настройки подключения к vMix                   │
├─────────────────────────────────────────────────┤
│  IP адрес vMix:                                 │
│  [192.168.1.100        ]                        │
│  Порт: [8088]                                   │
│  [Тест подключения]                             │
│                                                 │
│  Настройка инпутов:                             │
│  Заявка:              [Input1]                  │
│  Статистика:          [Input2]                  │
│  Состав команды:      [Input3]                  │
│  Стартовый состав:    [Input4]                  │
│  Текущий счет:        [Input5]                  │
│  Счет после П1:       [Input6]                  │
│  Счет после П2:       [Input7]                  │
│  Счет после П3:       [Input8]                  │
│  Счет после П4:       [Input9]                  │
│  Счет после П5:       [Input10]                 │
│  Плашка судья 1:      [Input11]                 │
│  Плашка судья 2:      [Input12]                 │
│                                                 │
│  Выбор оверлея:                                 │
│  ○ Оверлей 1  ○ Оверлей 2  ○ Оверлей 3         │
│  ○ Оверлей 4  ○ Оверлей 5  ○ Оверлей 6         │
│  ○ Оверлей 7  ● Оверлей 8                      │
│                                                 │
│  [Сохранить настройки]                          │
└─────────────────────────────────────────────────┘
```

**Функциональность:**

- Ввод IP адреса и порта vMix
- Тестирование подключения
- Настройка названий инпутов для каждого типа данных
- Выбор одного из 8 оверлеев
- Сохранение настроек (возможно, в отдельный конфигурационный файл)

---

### 5. Страница "Мобильный доступ"

**Назначение:** Генерация и управление доступом для мобильных устройств

**Элементы:**

```
┌─────────────────────────────────────────────────┐
│  Мобильный доступ                               │
├─────────────────────────────────────────────────┤
│  Статус сервера: [Запущен ✓]                    │
│  Адрес сервера: http://192.168.1.50:3000        │
│                                                 │
│  Уникальная ссылка для доступа:                 │
│  ┌─────────────────────────────────────────┐   │
│  │ http://192.168.1.50:3000/panel/abc123   │   │
│  └─────────────────────────────────────────┘   │
│  [Копировать ссылку]                            │
│                                                 │
│  QR-код для быстрого подключения:               │
│  ┌─────────────┐                                │
│  │             │                                │
│  │   [QR-код]  │                                │
│  │             │                                │
│  └─────────────┘                                │
│                                                 │
│  [Сгенерировать новую ссылку]                   │
│  [Остановить сервер]                            │
└─────────────────────────────────────────────────┘
```

**Функциональность:**

- Отображение статуса встроенного HTTP сервера
- Генерация уникальной ссылки для доступа
- Отображение QR-кода со ссылкой
- Копирование ссылки в буфер обмена
- Возможность генерации новой ссылки (старая становится недействительной)
- Управление сервером (запуск/остановка)

---

### 6. Мобильный интерфейс (браузер)

**Назначение:** Упрощенная версия контрольной панели для мобильных устройств

**Структура:**

```
┌─────────────────────────────────┐
│  vMix Volley Scoreboard         │
├─────────────────────────────────┤
│                                 │
│  Команда А    │    Команда Б    │
│  [Название]   │    [Название]   │
│                                 │
│  Текущий счет:                  │
│  [25] : [20]                    │
│                                 │
│  [ -1 ]  [ -1 ]                 │
│  Команда А    Команда Б         │
│                                 │
│  [ +1 ]  [ +1 ]                 │
│  Команда А    Команда Б         │
│                                 │
│  Счет по партиям:               │
│  Партия 1: [25] - [20]          │
│  Партия 2: [23] - [25]          │
│  Партия 3: [  ] - [  ]          │
│                                 │
│  Подача: [Команда А]            │
│                                 │
│  [Завершить партию]             │
│  [Отменить]                     │
│                                 │
│  Статус: [Синхронизировано ✓]   │
└─────────────────────────────────┘
```

**Особенности:**

- Адаптивный дизайн для мобильных устройств
- Крупные кнопки для удобного управления
- Минималистичный интерфейс (без управления плашками vMix)
- Отображение текущей подачи
- Автоматическая синхронизация с основным приложением
- Отображение статуса синхронизации
- Расширенная статистика доступна только в десктопной версии

---

### 7. Страница "Управление составами команд"

**Назначение:** Загрузка, редактирование и сохранение составов команд

**Элементы:**

```
┌─────────────────────────────────────────────────┐
│  Управление составами команд                   │
├─────────────────────────────────────────────────┤
│  Выбор команды: [Команда А ▼] [Команда Б ▼]   │
│                                                 │
│  Команда: [Название команды]                   │
│  Логотип: [Загрузить] [Удалить]                │
│  [Превью логотипа]                             │
│                                                 │
│  Тренер: [Имя тренера]                         │
│                                                 │
│  Состав команды:                                │
│  №  Имя              Позиция                    │
│  1  [Иванов И.И.]    [Нападающий ▼]            │
│  2  [Петров П.П.]    [Связующий ▼]             │
│  ...                                            │
│  [Добавить игрока] [Удалить]                    │
│                                                 │
│  Стартовый состав (отметить игроков):          │
│  ☑ 1  ☑ 2  ☐ 3  ☑ 4  ☑ 5  ☑ 6                  │
│                                                 │
│  [Сохранить состав] [Загрузить из файла]       │
│  [Экспорт в файл]                               │
└─────────────────────────────────────────────────┘
```

**Функциональность:**

- Загрузка и сохранение составов для каждой команды
- Загрузка логотипов команд (изображения)
- Указание тренера команды
- Редактирование списка игроков (добавление, удаление)
- Указание позиции каждого игрока
- Выбор стартового состава
- Импорт/экспорт составов в файлы

---

## Навигация

### Меню приложения

- **Файл:**
  - Создать новый матч
  - Открыть матч...
  - Сохранить матч
  - Сохранить матч как...
  - Выход
- **Вид:**
  - Настройки матча
  - Настройки vMix
  - Мобильный доступ
- **Справка:**
  - О программе

### Горячие клавиши

- `Ctrl+N` - Создать новый матч
- `Ctrl+O` - Открыть матч
- `Ctrl+S` - Сохранить матч
- `F5` - Обновить данные в vMix (ручное обновление)

---

## Состояния интерфейса

### Состояние "Нет открытого матча"

- Отображается страница "Добро пожаловать"
- Доступны только: создание/открытие матча, настройки vMix

### Состояние "Матч открыт"

- Отображается страница "Управление матчем"
- Все функции доступны
- Автоматическое обновление vMix

### Состояние "Ошибка подключения к vMix"

- Индикатор показывает ошибку
- Возможность повторного подключения
- Работа приложения продолжается, но без обновления vMix

---

## Адаптивность

- Десктопная версия: полнофункциональный интерфейс со всеми элементами
- Мобильная версия: упрощенный интерфейс с основными функциями управления счетом
- Единая кодовая база для обеих версий (React компоненты)

# План переработки страницы "Настройки подключения к vMix"

> **Примечание:** Этот документ описывает уже реализованную функциональность. Он сохранен для исторической справки и понимания архитектуры системы настроек vMix.

## Обзор

План переработки страницы настроек vMix для повышения универсальности и удобства настройки инпутов и оверлеев. Новая структура позволит более гибко настраивать каждый инпут с детальным управлением полями.

## Статус реализации

**✅ РЕАЛИЗОВАНО** - Все основные этапы переработки завершены и работают в приложении.

### Что уже реализовано:

- Поля для установки IP адреса и порта подключения
- Кнопка тестирования подключения
- **Полностью переработанная страница настроек vMix** с новой структурой интерфейса:
  - Вертикальные вкладки инпутов слева (`InputTabsList`)
  - Панель редактирования справа (`InputEditPanel`)
  - Детальная настройка каждого инпута и его полей
- **Система типов полей**: Текст, Видимость, Цвет
- **Каждое поле имеет `fieldIdentifier`** для кастомного обращения к vMix
- Сохранение настроек в глобальном файле `settings.json`
- **Интеграция с vMix**: автоматическая передача данных через соответствующие команды API
- **Синхронизация в реальном времени**: автоматическое обновление инпутов при изменении данных матча
- **Управление оверлеями** с отслеживанием состояния через vMix API

### Текущая структура данных:

```json
{
  "vmix": {
    "host": "localhost",
    "port": 8088,
    "inputs": {
      "currentScore": {
        "name": "Input5",
        "overlay": 1
      }
    }
  }
}
```

## Новая структура интерфейса

### Общий вид страницы:

```
┌─────────────────────────────────────────────────────────┐
│  Настройки подключения к vMix                           │
├─────────────────┬───────────────────────────────────────┤
│                 │                                       │
│  ВКЛАДКИ       │  ПАНЕЛЬ РЕДАКТИРОВАНИЯ                │
│  ИНПУТОВ       │  ВЫБРАННОГО ИНПУТА                     │
│  (вертикально) │                                       │
│                 │  - Включение/выключение               │
│  [ ] Текущий   │  - Имя/номер инпута                    │
│      счет      │  - Список полей с настройками          │
│                 │                                       │
│  [ ] Заявка    │                                       │
│                 │                                       │
│  [ ] Статистика│                                       │
│                 │                                       │
│  ...            │                                       │
└─────────────────┴───────────────────────────────────────┘
```

## Новая структура данных

### Формат настроек инпута:

```json
{
  "vmix": {
    "host": "localhost",
    "port": 8088,
    "inputs": {
      "currentScore": {
        "enabled": true,
        "inputIdentifier": "Input5", // или "Название инпута" для поиска по имени
        "overlay": 1,
        "fields": {
          "teamA": {
            "enabled": true,
            "type": "text",
            "fieldName": "Команда А",
            "fieldIdentifier": "TeamA"
          },
          "teamB": {
            "enabled": true,
            "type": "text",
            "fieldName": "Команда Б",
            "fieldIdentifier": "TeamB"
          },
          "scoreASet": {
            "enabled": true,
            "type": "text",
            "fieldName": "Счет команды А (в сете)",
            "fieldIdentifier": "ScoreASet"
          },
          "scoreBSet": {
            "enabled": true,
            "type": "text",
            "fieldName": "Счет команды Б (в сете)",
            "fieldIdentifier": "ScoreBSet"
          },
          "scoreASets": {
            "enabled": true,
            "type": "text",
            "fieldName": "Счет по сетам А",
            "fieldIdentifier": "ScoreASets"
          },
          "scoreBSets": {
            "enabled": true,
            "type": "text",
            "fieldName": "Счет по сетам Б",
            "fieldIdentifier": "ScoreBSets"
          },
          "pointA": {
            "enabled": true,
            "type": "visibility",
            "fieldName": "Поинт А",
            "fieldIdentifier": "PointA"
          },
          "pointB": {
            "enabled": true,
            "type": "visibility",
            "fieldName": "Поинт Б",
            "fieldIdentifier": "PointB"
          },
          "colorA": {
            "enabled": true,
            "type": "color",
            "fieldName": "Цвет А",
            "fieldIdentifier": "ColorA"
          },
          "colorB": {
            "enabled": true,
            "type": "color",
            "fieldName": "Цвет Б",
            "fieldIdentifier": "ColorB"
          }
        }
      },
      "roster": {
        "enabled": true,
        "inputIdentifier": "Input3",
        "overlay": 1,
        "fields": {
          "title": {
            "enabled": true,
            "type": "text",
            "fieldName": "Заголовок (название турнира)"
          },
          "subtitle": {
            "enabled": true,
            "type": "text",
            "fieldName": "Подзаголовок (название турнира)"
          },
          "teamName": {
            "enabled": true,
            "type": "text",
            "fieldName": "Название команды"
          },
          "teamCity": {
            "enabled": true,
            "type": "text",
            "fieldName": "Город команды"
          },
          "teamLogo": {
            "enabled": true,
            "type": "text",
            "fieldName": "Логотип команды (URL)"
          },
          "player1Number": {
            "enabled": true,
            "type": "text",
            "fieldName": "Номер игрока 1"
          },
          "player1Name": {
            "enabled": true,
            "type": "text",
            "fieldName": "Имя игрока 1"
          }
          // ... еще 12 пар полей для игроков 2-14 (player2Number, player2Name, ..., player14Number, player14Name)
        }
      },
      "lineup": {
        "enabled": true,
        "inputIdentifier": "Input1",
        "overlay": 1,
        "fields": {
          "title": {
            "enabled": true,
            "type": "text",
            "fieldName": "Заголовок (название турнира)",
            "fieldIdentifier": "Title"
          },
          "subtitle": {
            "enabled": true,
            "type": "text",
            "fieldName": "Подзаголовок",
            "fieldIdentifier": "Subtitle"
          },
          "teamALogo": {
            "enabled": true,
            "type": "image",
            "fieldName": "Лого команды А",
            "fieldIdentifier": "TeamALogo"
          },
          "teamAName": {
            "enabled": true,
            "type": "text",
            "fieldName": "Название команды А",
            "fieldIdentifier": "TeamAName"
          },
          "teamACity": {
            "enabled": true,
            "type": "text",
            "fieldName": "Город команды А",
            "fieldIdentifier": "TeamACity"
          },
          "teamBLogo": {
            "enabled": true,
            "type": "image",
            "fieldName": "Лого команды Б",
            "fieldIdentifier": "TeamBLogo"
          },
          "teamBName": {
            "enabled": true,
            "type": "text",
            "fieldName": "Название команды Б",
            "fieldIdentifier": "TeamBName"
          },
          "teamBCity": {
            "enabled": true,
            "type": "text",
            "fieldName": "Город команды Б",
            "fieldIdentifier": "TeamBCity"
          },
          "matchDate": {
            "enabled": true,
            "type": "text",
            "fieldName": "Дата проведения",
            "fieldIdentifier": "MatchDate"
          },
          "venueLine1": {
            "enabled": true,
            "type": "text",
            "fieldName": "Место проведения (строка 1)",
            "fieldIdentifier": "VenueLine1"
          },
          "venueLine2": {
            "enabled": true,
            "type": "text",
            "fieldName": "Место проведения (строка 2)",
            "fieldIdentifier": "VenueLine2"
          }
        }
      },
      "referee1": {
        "enabled": true,
        "inputIdentifier": "Input11",
        "overlay": 1,
        "fields": {
          "name": {
            "enabled": true,
            "type": "text",
            "fieldName": "Имя",
            "fieldIdentifier": "Name"
          },
          "position": {
            "enabled": true,
            "type": "text",
            "fieldName": "Должность",
            "fieldIdentifier": "Position"
          }
        }
      },
      "referee2": {
        "enabled": true,
        "inputIdentifier": "Input12",
        "overlay": 1,
        "fields": {
          "referee1Name": {
            "enabled": true,
            "type": "text",
            "fieldName": "Судья 1",
            "fieldIdentifier": "Referee1Name"
          },
          "referee2Name": {
            "enabled": true,
            "type": "text",
            "fieldName": "Судья 2",
            "fieldIdentifier": "Referee2Name"
          }
        }
      }
    }
  }
}
```

**Примечание:**

- В примере выше для инпута `roster` показаны только первые несколько полей. Полная конфигурация включает все 33 поля (5 основных + 28 полей для 14 игроков).
- Каждое поле имеет поле `fieldIdentifier` - кастомное имя для обращения к vMix. Это имя настраивается пользователем и используется при отправке команд в vMix вместе с `inputIdentifier` в формате `inputIdentifier.fieldIdentifier`.

## Типы полей

### 1. Текстовое поле (`type: "text"`)

- Используется для отображения текстовых данных
- Примеры: название команды, счет, имена судей и т.д.

### 2. Поле цвета (`type: "color"`)

- Используется для изменения цвета формы команды в vMix
- Значение: HEX цвет (например, "#FF0000")
- **Важно**: Для изменения цвета используется команда vMix API `SetColor`, а не `SetText`
- Цвета автоматически берутся из настроек матча (`match.teamA.color` и `match.teamB.color`)
- Формат передачи: `GET /api?Function=SetColor&Input=[inputIdentifier]&SelectedName=[fieldIdentifier]&Value=%23RRGGBB`

### 3. Поле видимости (`type: "visibility"`)

- Используется для управления видимостью элемента (например, точки атаки)
- Значение: `true` (видимо) / `false` (скрыто)
- В интерфейсе отображается как точка/индикатор

### 4. Поле изображения (`type: "image"`)

- Используется для отображения изображений (например, логотипов команд)
- **Тип:** `image` (поле изображения)
- **Значение:** Путь к файлу или URL изображения
- **Важно**: Для установки изображения используется команда vMix API `SetImage`, а не `SetText`
- **Формат передачи**: `GET /api?Function=SetImage&Input=[inputIdentifier]&SelectedName=[fieldIdentifier]&Value=[imagePath]`
- **Пример значения**: `http://192.168.1.100:3000/logos/logo_a.png` (URL с мобильного HTTP сервера) или `C:\Images\logo.png` (локальный путь)
- **Для логотипов команд**:
  - URL логотипа в формате PNG с мобильного HTTP сервера
  - Формат: `http://[IP_сервера]:[порт]/logos/logo_a.png` (для команды А) или `http://[IP_сервера]:[порт]/logos/logo_b.png` (для команды Б)
  - Имена файлов: Используются фиксированные имена `logo_a.png` и `logo_b.png` (сохраняются в папку `logos/` проекта)
  - Источник: Логотипы автоматически сохраняются в папку `logos/` при сохранении матча (конвертация из base64 в PNG)
  - Сервер: Мобильный HTTP сервер обслуживает папку `logos/` через маршрут `/logos`

## Детальные требования к реализации

### 1. Левая панель с вкладками (вертикальная навигация)

#### Элементы:

- Список всех инпутов в виде вкладок
- Каждая вкладка содержит:
  - Чекбокс для включения/выключения инпута
  - Название инпута (из `inputLabels`)
- Выбранная вкладка выделяется визуально
- При клике на вкладку открывается панель редактирования справа

#### Стилизация:

- Фиксированная ширина (например, 250px)
- Высота на всю доступную область
- Прокрутка при большом количестве инпутов
- Активная вкладка имеет выделенный фон

### 2. Правая панель редактирования

#### Секция 1: Общие настройки инпута

- **Переключатель "Включить инпут"**
  - Если выключен, все поля инпута игнорируются при отправке команд
- **Поле "Имя или номер инпута"**
  - Текстовое поле
  - Поддержка как числовых значений (номер инпута), так и строковых (имя инпута)
  - Подсказка: "Если число - обращение по номеру, если строка - поиск по имени"
- **Поле "Номер оверлея"**
  - Выпадающий список (1-8)
  - Для управления отображением оверлея

#### Секция 2: Настройка полей

- Заголовок: "Поля инпута"
- Список всех полей для данного инпута
- Каждое поле имеет:
  - Чекбокс включения/выключения
  - Название поля
  - Тип поля (отображается меткой или иконкой)
  - В зависимости от типа:
    - Для текстовых: без дополнительных настроек (включая поля логотипов - это текстовые поля с URL)
    - Для цвета: мини-превью цвета (опционально)
    - Для видимости: иконка точки/индикатора
    - Для полей логотипов (текстовых с URL): подсказка о формате URL, превью логотипа (опционально)

### 3. Структура компонента

```
VMixSettingsPage
├── ConnectionSettings (верхняя часть - IP, порт, тест)
├── InputSettingsPanel
│   ├── InputTabsList (левая панель)
│   │   └── InputTabItem[]
│   └── InputEditPanel (правая панель)
│       ├── InputGeneralSettings
│       └── FieldsList
│           └── FieldItem[]
```

## Конфигурация инпутов

### Определение инпутов и их полей

Каждый инпут должен иметь предопределенный список доступных полей. На начальном этапе полностью готовы следующие инпуты: "Текущий счет", "Состав команды (полный)", "Заявка", "Плашка общая" и "Плашка 2 судьи".

#### Инпут: "Текущий счет (во время партии)" (`currentScore`)

Поля:

1. **teamA** - Команда А (текст)
2. **teamB** - Команда Б (текст)
3. **scoreASet** - Счет команды А (в сете) (текст)
4. **scoreBSet** - Счет команды Б (в сете) (текст)
5. **scoreASets** - Счет по сетам А (текст)
6. **scoreBSets** - Счет по сетам Б (текст)
7. **pointA** - Поинт А (видимость)
8. **pointB** - Поинт Б (видимость)
9. **colorA** - Цвет А (цвет)
10. **colorB** - Цвет Б (цвет)

#### Инпут: "Состав команды (полный)" (`roster`)

Поля:

1. **title** - Заголовок (название турнира) (текст)
2. **subtitle** - Подзаголовок (тоже для названия турнира) (текст)
3. **teamName** - Название команды (текст)
4. **teamCity** - Город команды (текст)
5. **teamLogo** - Логотип команды (URL, текст)

Далее 14 пар полей для игроков (всего 28 полей): 6. **player1Number** - Номер игрока 1 (текст) 7. **player1Name** - Имя игрока 1 (текст) 8. **player2Number** - Номер игрока 2 (текст) 9. **player2Name** - Имя игрока 2 (текст) 10. **player3Number** - Номер игрока 3 (текст) 11. **player3Name** - Имя игрока 3 (текст) 12. **player4Number** - Номер игрока 4 (текст) 13. **player4Name** - Имя игрока 4 (текст) 14. **player5Number** - Номер игрока 5 (текст) 15. **player5Name** - Имя игрока 5 (текст) 16. **player6Number** - Номер игрока 6 (текст) 17. **player6Name** - Имя игрока 6 (текст) 18. **player7Number** - Номер игрока 7 (текст) 19. **player7Name** - Имя игрока 7 (текст) 20. **player8Number** - Номер игрока 8 (текст) 21. **player8Name** - Имя игрока 8 (текст) 22. **player9Number** - Номер игрока 9 (текст) 23. **player9Name** - Имя игрока 9 (текст) 24. **player10Number** - Номер игрока 10 (текст) 25. **player10Name** - Имя игрока 10 (текст) 26. **player11Number** - Номер игрока 11 (текст) 27. **player11Name** - Имя игрока 11 (текст) 28. **player12Number** - Номер игрока 12 (текст) 29. **player12Name** - Имя игрока 12 (текст) 30. **player13Number** - Номер игрока 13 (текст) 31. **player13Name** - Имя игрока 13 (текст) 32. **player14Number** - Номер игрока 14 (текст) 33. **player14Name** - Имя игрока 14 (текст)

**Важное замечание:** Если в списке игроков команды меньше 14 человек, то в оставшиеся поля (номер и имя игрока) необходимо передавать пустые строки. Это обеспечит корректное отображение в vMix, где все 14 строк должны быть обработаны, даже если некоторые из них пустые.

#### Инпут: "Заявка (TeamA vs TeamB)" (`lineup`)

Поля:

1. **title** - Заголовок (название турнира) (текст)
2. **subtitle** - Подзаголовок (текст)
3. **teamALogo** - Лого команды А (изображение)
4. **teamAName** - Название команды А (текст)
5. **teamACity** - Город команды А (текст)
6. **teamBLogo** - Лого команды Б (изображение)
7. **teamBName** - Название команды Б (текст)
8. **teamBCity** - Город команды Б (текст)
9. **matchDate** - Дата проведения (текст)
10. **venueLine1** - Место проведения (строка 1) (текст)
11. **venueLine2** - Место проведения (строка 2) (текст)

#### Инпут: "Плашка общая" (`referee1`)

Поля:

1. **name** - Имя (текст)
2. **position** - Должность (текст)

#### Инпут: "Плашка 2 судьи" (`referee2`)

Поля:

1. **referee1Name** - Судья 1 (имя) (текст)
2. **referee2Name** - Судья 2 (имя) (текст)

### Остальные инпуты (для будущего расширения)

Инпуты определены, но поля для них будут добавляться постепенно:

- `statistics` - Статистика
- `startingLineup` - Стартовый состав команды
- `set1Score` - Счет после 1 партии
- `set2Score` - Счет после 2 партии
- `set3Score` - Счет после 3 партии
- `set4Score` - Счет после 4 партии
- `set5Score` - Счет после 5 партии

## Миграция данных

### Конвертация старого формата в новый

При загрузке настроек необходимо конвертировать старый формат:

**Старый формат:**

```json
{
  "inputs": {
    "currentScore": {
      "name": "Input5",
      "overlay": 1
    }
  }
}
```

**Новый формат:**

```json
{
  "inputs": {
    "currentScore": {
      "enabled": true,
      "inputIdentifier": "Input5",
      "overlay": 1,
      "fields": {
        // Поля с значениями по умолчанию (все enabled: true)
      }
    }
  }
}
```

### Алгоритм миграции:

1. При загрузке настроек проверять формат каждого инпута
2. Если формат старый (только `name` и `overlay`):
   - Установить `enabled: true`
   - Переименовать `name` в `inputIdentifier`
   - Создать объект `fields` с полями по умолчанию (все `enabled: true`)
   - Сохранить обновленные настройки

## Функциональность

### Включение/выключение инпута

- Если инпут выключен (`enabled: false`):
  - При отправке команд в vMix этот инпут пропускается
  - Визуально помечается как неактивный (например, серым цветом)
  - Все поля инпута тоже не используются

### Включение/выключение поля

- Если поле выключено (`enabled: false`):
  - Это поле не отправляется в vMix при обновлении инпута
  - Визуально помечается как неактивное
  - Экономит ресурсы на формирование команды

### Определение инпута по имени или номеру

- Если `inputIdentifier` - число или строка вида "Input5":
  - Использовать как номер инпута в командах vMix
- Если `inputIdentifier` - строка (например, "Счет матча"):
  - Использовать поиск инпута по имени в vMix
  - В будущем может потребоваться API для получения списка инпутов

### Обращение к полям в vMix

- При отправке команд в vMix используется комбинация:
  - `inputIdentifier` - имя или номер инпута
  - `fieldIdentifier` - имя поля в vMix (задается пользователем для каждого поля)
- Формат обращения: `inputIdentifier.fieldIdentifier`
  - Пример: если `inputIdentifier = "Input5"` и `fieldIdentifier = "TeamA"`, то обращение будет `Input5.TeamA`
- Каждое поле имеет свое кастомное имя (`fieldIdentifier`), которое настраивается в интерфейсе настроек
- Имя поля для vMix можно изменить в настройках, сохраняется в глобальных настройках
- Значения по умолчанию для `fieldIdentifier` задаются в конфигурациях полей (например, "TeamA", "ScoreASet")

### Обработка неполных данных (например, для инпута "Состав команды")

- Для инпутов с повторяющимися полями (например, 14 игроков):
  - Если данных меньше, чем определено полей (например, в команде только 10 игроков вместо 14):
    - Заполнить недостающие поля пустыми строками
    - Это гарантирует корректную обработку всех строк в vMix
    - Пример: если есть только 10 игроков, то для полей `player11Number`, `player11Name`, `player12Number`, `player12Name`, `player13Number`, `player13Name`, `player14Number`, `player14Name` передаются пустые строки (`""`)

### Формирование URL логотипов

- Поля логотипов (например, `teamLogo`, `teamALogo`, `teamBLogo`) являются текстовыми полями типа `text`
- Значение должно быть URL логотипа в формате PNG с мобильного HTTP сервера

**Хранение логотипов:**

- Логотипы сохраняются в папку `logos/` в корне проекта (постоянная папка проекта, не временная)
- Используются фиксированные имена: `logo_a.png` для команды А, `logo_b.png` для команды Б
- При сохранении матча логотипы автоматически конвертируются из base64 в PNG файлы
- Файлы перезаписываются при каждом сохранении матча (синхронизация данных)
- Папка создается автоматически при первом сохранении логотипа

**Сервер:**

- Мобильный HTTP сервер обслуживает папку `logos/` через Express static middleware
- Маршрут: `this.app.use('/logos', express.static(logosPath))`
- Логотипы доступны по URL: `/logos/logo_a.png` и `/logos/logo_b.png`

**Формат URL:**

- `http://[IP_сервера]:[порт]/logos/logo_a.png` (для команды А)
- `http://[IP_сервера]:[порт]/logos/logo_b.png` (для команды Б)

**IP адрес и порт:**

- IP адрес и порт берутся из настроек мобильного сервера (см. раздел "Мобильный доступ")
- IP адрес определяется автоматически методом `getLocalIP()` (игнорирует VPN, выбирает локальную сеть)
- Порт по умолчанию: 3000 (настраивается в настройках мобильного доступа)

**Примеры:**

- Если мобильный сервер работает на `192.168.1.100:3000`, то URL команды А: `http://192.168.1.100:3000/logos/logo_a.png`
- Если мобильный сервер работает на `10.0.0.5:3000`, то URL команды Б: `http://10.0.0.5:3000/logos/logo_b.png`

## Сохранение данных

### Где сохраняются:

- Все настройки сохраняются в глобальный файл `settings.json`
- Структура: `settings.vmix.inputs[inputKey]`

### Когда сохраняются:

- При нажатии кнопки "Сохранить настройки"
- Автоматическое сохранение может быть добавлено в будущем

### Обработка ошибок:

- При ошибке сохранения показывать сообщение пользователю
- Сохранять предыдущее состояние до успешного сохранения

## UI/UX рекомендации

### Общие принципы:

- Современный, чистый интерфейс
- Понятные иконки для типов полей
- Подсказки для неочевидных настроек
- Визуальная обратная связь при изменениях

### Цветовая схема:

- Активные элементы: основные цвета приложения (#3498db, #27ae60)
- Неактивные элементы: серые оттенки (#95a5a6, #bdc3c7)
- Выделение: яркий цвет для активной вкладки

### Адаптивность:

- Минимальная ширина страницы: ~800px
- Левая панель: фиксированная ширина
- Правая панель: растягивается на оставшееся пространство

## Этапы реализации

### Этап 1: Структура данных и миграция ✅

- [x] Обновить типы данных в `settingsManager.js`
- [x] Реализовать функцию миграции старых настроек
- [x] Добавить значения по умолчанию для инпута "Текущий счет"
- [x] Добавить значения по умолчанию для инпута "Состав команды (полный)"
- [x] Добавить значения по умолчанию для инпута "Заявка"
- [x] Добавить значения по умолчанию для инпута "Плашка общая"
- [x] Добавить значения по умолчанию для инпута "Плашка 2 судьи"

### Этап 2: Базовая структура UI ✅

- [x] Разделить страницу на левую и правую панели
- [x] Реализовать компонент списка вкладок (левая панель)
- [x] Реализовать компонент панели редактирования (правая панель)

### Этап 3: Общие настройки инпута ✅

- [x] Переключатель включения/выключения инпута
- [x] Поле для имени/номера инпута (`inputIdentifier`)
- [x] Поле для номера оверлея

### Этап 4: Настройка полей ✅

- [x] Компонент списка полей
- [x] Компонент элемента поля с чекбоксом
- [x] Визуальные индикаторы типов полей
- [x] Поле для редактирования `fieldIdentifier` каждого поля

### Этап 5: Полная конфигурация инпутов ✅

- [x] Добавить все 10 полей для инпута currentScore
- [x] Добавить все 33 поля для инпута roster (5 основных + 28 для 14 игроков)
- [x] Добавить все 11 полей для инпута lineup
- [x] Добавить все 2 поля для инпута referee1 (Плашка общая)
- [x] Добавить все 2 поля для инпута referee2 (Плашка 2 судьи)
- [x] Правильная типизация полей (текст, цвет, видимость)
- [x] Тестирование сохранения и загрузки

### Этап 6: Интеграция с логикой отправки команд ✅

- [x] Обновить `useVMix.js` для использования новых настроек
- [x] Учитывать `enabled` флаги при отправке команд
- [x] Учитывать `inputIdentifier` вместо `name`
- [x] Реализовать логику заполнения пустыми строками для недостающих данных (например, если игроков меньше 14)
- [x] Обработка различных типов полей (текст, цвет, видимость) при формировании команд для vMix
- [x] Генерация URL логотипов в формате `http://[IP]:[порт]/logos/logo_a.png` или `http://[IP]:[порт]/logos/logo_b.png`
- [x] Реализация функций обмена с vMix: `updateInputField()`, `setColor()`, `setTextVisibility()`, `updateInputFields()`
- [x] Автоматическая синхронизация данных в реальном времени
- [x] Управление оверлеями с отслеживанием состояния через vMix API

### Этап 7: Тестирование и доработка ✅

- [x] Тестирование миграции данных
- [x] Тестирование сохранения/загрузки
- [x] Проверка работы с vMix
- [x] Улучшение UI/UX

## Будущие улучшения

### Планируется добавить:

1. **API получения списка инпутов vMix** - для автоматического определения инпутов
2. **Предпросмотр полей** - отображение того, как будут выглядеть данные
3. **Группировка полей** - логическая группировка связанных полей
4. **Экспорт/импорт конфигурации** - для шаблонов настроек
5. **Валидация настроек** - проверка корректности перед сохранением
6. **Автоматическое определение полей** - на основе API vMix (если доступно)

## Примечания

- Конфигурация должна быть расширяемой - легко добавлять новые инпуты и поля
- Обратная совместимость важна - старые настройки должны работать после миграции
- Производительность - не должно быть задержек при работе с большим количеством полей
- Пользовательский опыт - настройки должны быть интуитивно понятными

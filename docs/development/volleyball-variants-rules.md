# Правила вариантов волейбола: зал, пляж, снежный (Россия)

**Цель документа:** описать различия в правилах подсчёта для классического (зального), пляжного и снежного волейбола в России, чтобы при будущих оптимизациях можно было адаптировать приложение под все три варианта без дублирования логики.

**Код пока не меняем** — документ служит спецификацией для будущей параметризации правил.

*Последнее обновление: 2026-02-04*

---

## Оглавление

1. [Сводная таблица параметров](#сводная-таблица-параметров)
2. [Волейбол в зале (текущая реализация)](#волейбол-в-зале-текущая-реализация)
3. [Пляжный волейбол](#пляжный-волейбол)
4. [Снежный волейбол](#снежный-волейбол)
5. [Рекомендации по адаптации приложения](#рекомендации-по-адаптации-приложения)

---

## Сводная таблица параметров

| Параметр | Зал (ВФВ) | Пляж (Россия / ФИВБ) | Снежный (Россия / ФИВБ) |
|----------|-----------|----------------------|--------------------------|
| **Партий в матче** | до 5 (максимум) | до 3 (максимум) | до 3 (максимум) |
| **Партий для победы в матче** | 3 | 2 | 2 |
| **Очков в обычных партиях** | 25 | 21 | 15 |
| **Очков в решающей партии** | 15 (5-я партия) | 15 (3-я партия) | 15 (3-я партия) |
| **Разница для победы в партии** | 2 очка | 2 очка | 2 очка |
| **Порог сетбола (обычные партии)** | 24 | 20 | 14 |
| **Порог сетбола (решающая партия)** | 14 | 14 | 14 |
| **Порог завершения партии (обычные)** | 25 | 21 | 15 |
| **Порог завершения партии (решающая)** | 15 | 15 | 15 |
| **Номер решающей партии** | 5 | 3 | 3 |

Общее для всех вариантов:
- Система **rally-point** (очко за каждый выигранный розыгрыш).
- При равном счёте на пороге (24:24, 21:21, 15:15 и т.д.) сетбола нет; игра идёт до разницы в 2 очка.
- Сетбол и матчбол определяются по одному и тому же принципу: порог зависит от типа партии (обычная / решающая) и от варианта игры.

---

## Волейбол в зале (текущая реализация)

- **Источник правил:** ВФВ / ФИВБ, классический волейбол в зале.
- **Реализация:** `src/shared/volleyballRules.js` (жёстко заданные константы).

**Правила:**
- Матч до **3 побед** (до 5 партий максимум).
- Партии 1–4: до **25** очков, разница 2; при 24:24 — до разницы 2.
- Партия 5 (тай-брейк): до **15** очков, разница 2; при 14:14 — до разницы 2.
- Сетбол: порог **24** (партии 1–4) и **14** (партия 5). При равном счёте на пороге сетбола нет.
- Матчбол: команда ведёт 2:0 или 2:1 по партиям и находится на сетболе в текущей партии.

---

## Пляжный волейбол

- **Источник правил:** ВФВ / ФИВБ, официальные правила пляжного волейбола (в т.ч. Россия).
- **Состав:** 2×2, замена по ходу матча не предусмотрена (для счётчика не критично).

**Правила счёта:**
- Матч до **2 побед** (до 3 партий максимум).
- Партии 1–2: до **21** очка, разница 2; при 20:20 — до разницы 2.
- Партия 3 (решающая): до **15** очков, разница 2; при 14:14 — до разницы 2.
- Сетбол: порог **20** в 1–2-й партиях, **14** в 3-й. При равном счёте (20:20, 14:14) сетбола нет.
- Матчбол: команда ведёт 1:0 по партиям и находится на сетболе во 2-й партии, либо на сетболе в 3-й партии.

**Для адаптации приложения:**
- Ввести параметры: «обычная партия: 21 очко», «решающая партия: 3-я», «побед в матче: 2», «максимум партий: 3».
- Пороги сетбола: 20 и 14 в зависимости от номера партии.

---

## Снежный волейбол

- **Источник правил:** ВФВ / ФИВБ, правила снежного волейбола (Россия, международные турниры).
- **Состав:** 2×2, замены по ходу матча не предусмотрены.

**Правила счёта:**
- Матч до **2 побед** (до 3 партий максимум).
- Все партии: до **15** очков, разница 2; при 14:14 — до разницы 2.
- Сетбол: порог **14** во всех партиях. При 14:14 сетбола нет.
- Матчбол: команда ведёт 1:0 по партиям и на сетболе во 2-й партии, либо на сетболе в 3-й партии.

**Для адаптации приложения:**
- Параметры: «партия: 15 очков» (и обычная, и решающая), «решающая партия: 3-я», «побед в матче: 2», «максимум партий: 3».
- Один порог сетбола: 14 для любой партии.

---

## Рекомендации по адаптации приложения

### 1. Параметры правил (конфигурируемые)

Вынести в настройки матча или в общий конфиг «тип игры» и производные от него константы:

| Параметр в коде | Зал | Пляж | Снежный |
|-----------------|-----|------|---------|
| `setsToWinMatch` | 3 | 2 | 2 |
| `maxSets` | 5 | 3 | 3 |
| `pointsToWinRegularSet` | 25 | 21 | 15 |
| `pointsToWinDecidingSet` | 15 | 15 | 15 |
| `decidingSetNumber` | 5 | 3 | 3 |
| `setballThresholdRegular` | 24 | 20 | 14 |
| `setballThresholdDeciding` | 14 | 14 | 14 |

Текущий код в `volleyballRules.js` можно заменить на использование этих параметров (или фабрики правил по типу игры).

### 2. Затрагиваемые места

- **`volleyballRules.js`:** `isSetball`, `canFinishSet` — пороги и номер решающей партии; `isMatchball`, `getMatchWinner` — количество партий для победы в матче и учёт только «решающей» партии.
- **Типы/интерфейсы:** максимальное количество партий в структуре матча (сейчас ориентир на 5).
- **Валидация:** проверки «до 25 / до 15» и номера партии при редактировании счёта и завершении партии.
- **UI:** отображение партий (1–5 для зала, 1–3 для пляжа/снежного), подписи «5-я партия» / «3-я партия» (решающая).

### 3. Обратная совместимость

- Существующие матчи (зал, 5 партий) должны продолжать открываться и работать без изменений.
- Рекомендуется значение по умолчанию: «волейбол в зале» (текущее поведение).

### 4. Ссылки на официальные правила

- Зал: [ВФВ — официальные правила волейбола](https://volley.ru/federation/documents/official-volleyball-rules/).
- Пляж: ВФВ / ФИВБ, официальные правила пляжного волейбола; [пляжный волейбол ВФВ](https://beach.volley.ru/).
- Снежный: [Волейбол на снегу ВФВ](https://snow.volley.ru/); при расхождениях ориентироваться на актуальные документы ВФВ/ФИВБ.

---

При внесении изменений в код правила следует обновлять и этот документ, и раздел «Правила волейбола» в [Документации по логике счёта и состояний партий](./score-and-set-status-logic-documentation.md).
